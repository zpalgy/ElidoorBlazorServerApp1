@using BlazorServerApp1.Data

@page "/Movingwing"

@inherits MovingwingBase

@inject IJSRuntime Js

<style>
    th, td {
        padding: 15px;
        text-align: center;
    }
</style>
@code
{
    [Parameter]
    public DoorConfig doorConfig { get; set; }

    [Parameter]
    public bool disableLogo { get; set; }
}

<table id="MovingWingL1">
    <tr>

        <th id="thOpenSide" hidden="@UiLogic.hideFld(doorConfig, "OpenSide")">כיוון פתיחה (R,L)</th>
        <th id="thDecorFormat" hidden="@UiLogic.hideFld(doorConfig, "DecorFormat")">עיצוב דקורציה (חוץ,פנים,דו צדדי)</th>
        <th id="thTwoColors" hidden="@UiLogic.hideFld(doorConfig, "TwoColors")">צביעה בשני צבעים</th>
        <th id="thDoorWidth" hidden="@UiLogic.hideFld(doorConfig, "DoorWidth")">רוחב דלת</th>
        <th id="thDoorColor" hidden="@UiLogic.hideFld(doorConfig, "DoorColor")">גוון דלת</th>
    </tr>
    <tr>
        <td id="tdOpenSide" hidden="@UiLogic.hideFld(doorConfig, "OpenSide")">
            <select name="dlstOpenSide" @bind="openSide" disabled="@UiLogic.disableFld(doorConfig, "OpenSide")">
                <option> </option>
                <option>ימין</option>
                <option>שמאל</option>
            </select>
            @code
            {
                protected string _openSide = string.Empty;
                protected string openSide
                {
                    get
                    {
                        if (doorConfig != null)
                        {
                            _openSide = doorConfig.OPENSIDE;
                        }
                        return _openSide;
                    }
                    set
                    {
                        _openSide = value;
                        if (doorConfig != null)
                            doorConfig.OPENSIDE = _openSide;
                    }
                }

            }
        </td>
        <td id="tdDecorFormat" hidden="@UiLogic.hideFld(doorConfig, "DecorFormat")">
            <select name="dlstDecorFormat" @bind="DecorFormat">
                <option>ללא</option>
                <option>חוץ</option>
                <option>פנים</option>
                <option>דו צדדי</option>
            </select>
        </td>
        @code {
            protected string _DecorFormat = string.Empty;
            protected string DecorFormat
            {
                get
                {
                    if (doorConfig != null)
                    {
                        _DecorFormat = doorConfig.DECORFORMAT;
                    }
                    return _DecorFormat;
                }
                set
                {
                    _DecorFormat = value;
                    if (doorConfig != null)
                        doorConfig.DECORFORMAT = _DecorFormat;
                }
            }

        }
        <td id="tdTwoColors" hidden="@UiLogic.hideFld(doorConfig, "TwoColors")">
            <input type="checkbox" name="chkbTwoColors" @bind="TwoColors" />
        </td>
        @code
        {
            protected bool _TwoColors = false;
            protected bool TwoColors
            {
                get
                {
                    if (doorConfig != null)
                    {
                        _TwoColors = (doorConfig.TWOCOLORS == "Y");
                    }
                    return _TwoColors;
                }
                set
                {
                    _TwoColors = value;
                    if (doorConfig != null)
                        doorConfig.TWOCOLORS = (_TwoColors ? "Y" : "");
                }
            }

        }
        <td id="tdDoorWidth" hidden="@UiLogic.hideFld(doorConfig, "DoorWidth")">
            <input name="txtDoorWidth" @bind="DoorWidth" />
        </td>
        @code
        {
            protected int _DoorWidth = 0;
            protected int DoorWidth
            {
                get
                {
                    if (doorConfig != null)
                    {
                        _DoorWidth = doorConfig.DOORWIDTH;
                    }
                    return _DoorWidth;
                }
                set
                {
                    _DoorWidth = value;
                    if (doorConfig != null)
                    {
                        doorConfig.DOORWIDTH = _DoorWidth;
                        //[TODO] implement the following lines
                        //if (chkbComplient.Checked)
                        //     txtWindowWidth.Text = calcWindowWidth();
                        if (!string.IsNullOrEmpty(doorConfig.PARTNAME))
                        {
                            string errMsg = string.Empty;
                            doorConfig.WINDOWWIDTH = calcWindowWidth(doorConfig, ref errMsg);
                            if (doorConfig.WINDOWWIDTH == 0 && !string.IsNullOrEmpty(errMsg))
                            {
                                Js.InvokeVoidAsync("alert", errMsg);
                            }
                        }
                    }
                }
            }
        }

        <td id="tdDoorColor" hidden="@UiLogic.hideFld(doorConfig, "DoorColor")">
            <select name="dlstDoorColor" @bind="DoorColorId">
                @if (PrApiCalls.lstColors != null)
                {
                    @foreach (TRSH_COLOR_Class c in PrApiCalls.lstColors)
                    {
                        <option value="@c.TRSH_COLORID">@c.TRSH_COLORDES</option>
                    }
                }
            </select>
        </td>
        @code
        {
            protected int _DoorColorId = 0;
            protected int DoorColorId
            {
                get
                {
                    if (doorConfig != null)
                    {
                        _DoorColorId = doorConfig.DOORCOLORID;
                    }
                    return _DoorColorId;
                }
                set
                {
                    _DoorColorId = value;
                    if (doorConfig != null)
                        doorConfig.DOORCOLORID = _DoorColorId;
                }
            }

        }
    </tr>
</table>
<!-- end table MovingWingL1 -->
<br />
<table id="MovingWingL2">
    <tr>
        <th id="thDoorHeight" hidden="@UiLogic.hideFld(doorConfig, "DoorHeight")">גובה דלת</th>
        <th id="thTurboApparatus" hidden="@UiLogic.hideFld(doorConfig, "TurboApparatus")">מנגנון תגבור</th>
        <th id="thLockDrilHeight" hidden="@UiLogic.hideFld(doorConfig, "LockDrilHeight")">גובה ניקוב / מרכז לשונית</th>
        <th id="thLogo" hidden="@UiLogic.hideFld(doorConfig, "Logo")">לוגו</th>
        <th id="thHw" hidden="@UiLogic.hideFld(doorConfig, "Hw")">פירזול</th>
        <th id="thHwColor" hidden="@UiLogic.hideFld(doorConfig, "HwColor")">פירזול בצבע</th>
        <th id="thDril4Hw" hidden="@UiLogic.hideFld(doorConfig, "Dril4Hw")">ניקוב פירזול</th>
    </tr>
    <tr>
        <td id="tdDoorHeight" hidden="@UiLogic.hideFld(doorConfig, "DoorHeight")">
            <input name="txtDoorHeight" @bind="doorConfig.DOORHEIGHT" />
        </td>
        <td id="tdTurboApparatus">
            <input type="checkbox" name="chkbTurboApparatus" />
        </td>
        <td id="tdLockDrilHeight">
            <input name="txtLockDrilHeight" />
        </td>
        <td id="tdLogo">
            <input type="checkbox" name="chkbLogo" disabled="@disableLogo"/>
        </td>
        @code
        {
				protected bool _chkbLogo = false;
                protected bool chkbLogo
                {
                    get
                    {
                        if (doorConfig != null)
                        {
                            _chkbLogo = (doorConfig.LOGO == "Y");
                        }
                        return _chkbLogo;
                    }
                    set
                    {
                        _chkbLogo = value;
                        if (doorConfig != null)
                            doorConfig.LOGO = (_chkbLogo ? "Y" : "");
                    }
                }

        }
        <td id="tdHw">
            <asp:DropDownList ID="dlstHw" AutoPostBack="false"
                              OnSelectedIndexChanged="ctl_valChanged"
                              onChange="clearFollowingTabs('movingwing')" />
        </td>
        <td id="tdHwColor">
            <asp:DropDownList ID="dlstHwColor" AutoPostBack="false"
                              DataValueField="TRSH_COLORID"
                              DataTextField="TRSH_COLORDES"
                              SelectMethod="getColors"
                              OnSelectedIndexChanged="ctl_valChanged"
                              onChange="clearFollowingTabs('movingwing')" />
        </td>
        <td id="tdDril4Hw">
            <asp:DropDownList ID="dlstDril4Hw" AutoPostBack="false"
                              DataValueField="DRIL4HW"
                              DataTextField="DRIL4HWDES"
                              SelectMethod="getDril4Hws"
                              OnSelectedIndexChanged="ctl_valChanged"
                              onChange="Dril4Hw_change()" />
        </td>
    </tr>
</table>
<!-- end MovingWingL2 -->
<br />
<table id="MovingWingL3">
    <tr>
        <th id="thCylinder">צילינדר</th>
        <th id="thElectricApparatus">מנגנון חשמלי</th>
        <th id="thLock">מנעול</th>
        <th id="thTwoSidesIDSDril">ניקוב שני צדדים IDS</th>
        <th id="thRafafa">תוספת רפפה עשן/פתח איוורור בכנף הנעה</th>
        <th id="thLCDEye">LCD עינית</th>
    </tr>
    <tr>
        <td id="tdCylinder">
            <asp:DropDownList ID="dlstCylinder" AutoPostBack="false"
                              DataValueField="CYLINDERNAME"
                              DataTextField="CYLINDERDES"
                              SelectMethod="getCylinders"
                              OnSelectedIndexChanged="ctl_valChanged"
                              onChange="clearFollowingTabs('movingwing')" />
        </td>
        <td id="tdElectricApparatus">
            <asp:CheckBox ID="chkbElectricApparatus" AutoPostBack="false"
                          OnCheckedChanged="ctl_valChanged"
                          onChange="clearFollowingTabs('movingwing')" />
        </td>
        <td id="tdLock">
            <asp:DropDownList ID="dlstLock" AutoPostBack="false"
                              OnSelectedIndexChanged="ctl_valChanged"
                              onChange="clearFollowingTabs('movingwing')" />
        </td>
        <td id="tdTwoSidesIDSDril">
            <asp:CheckBox ID="chkbTwoSidesIDSDril" AutoPostBack="false" Enabled="false"
                          OnCheckedChanged="ctl_valChanged"
                          onChange="clearFollowingTabs('movingwing')" />
        </td>
        <td id="tdRafafa">
            <asp:UpdatePanel ID="uPanelRafafa">
                <ContentTemplate>
                    <asp:DropDownList ID="dlstRafafa" AutoPostBack="false"
                                      OnSelectedIndexChanged="ctl_valChanged"
                                      onChange="clearFollowingTabs('movingwing')">
                        <asp:ListItem> </asp:ListItem>
                        <asp:ListItem>1</asp:ListItem>
                        <asp:ListItem>2</asp:ListItem>
                        <asp:ListItem>כל הדלת</asp:ListItem>
                    </asp:DropDownList>
                </ContentTemplate>
            </asp:UpdatePanel>
        </td>
        <td id="tdLCDEye">
            <asp:CheckBox ID="chkbLCDEye" AutoPostBack="false"
                          OnCheckedChanged="ctl_valChanged"
                          onChange="clearFollowingTabs('movingwing')" />
        </td>
    </tr>
</table>
<!-- end table MovingWingL3 -->
@code {
    //bool  x1 = Helper.setHideFld(1, true);

}

<!-- end divMovingWing -->
